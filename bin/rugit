#! /usr/bin/env ruby

require_relative ("../lib/command")

begin
    name = ARGV.shift
    Command.execute(name)
rescue Command::Unknown => error
    $stderr.puts "rugit: #{ error.message }"
    exit 1
rescue => error
    $stderr.puts "fatal: #{ error.message }"
    if ENV["DEBUG"]
        error.backtrace.each do |line|
            $stderr.puts "      from #{ line }"
        end
    end
    exit 1
end
